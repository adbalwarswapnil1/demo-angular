<h1>Projects</h1>
<div class="row">
    <div class="col-9 mx-auto">

      <div class="form-group form-row">
        <label for="drpSearchBy" class="col-form-label col-3">Search:</label>
        <div class="col-9">
          <select
            class="form-control"
            id="drpSearchBy"
            name="searchBy"
            [(ngModel)]="searchBy"
          >
            <option value="ProjectID">Project ID</option>
            <option value="ProjectName">Project Name</option>
            <option value="DateOfStart">Date of Start</option>
            <option value="TeamSize">Team Size</option>
          </select>
        </div>
      </div>
      <div class="form-group form-row">
        <label for="textSearchText" class="col-form-label col-3">Search:</label>
        <div class="col-9">
          <div class="input-group">
            <input
              type="text"
              class="form-control"
              id="txtSearchText"
              name="SearchText"
              [(ngModel)]="searchText"
            />
            
          </div>
          <div class="mt-2 " >
            <button class="btn btn-info" (click)="onSearchClick()">Search</button>
            
          </div>
        </div>
      </div>
    

      <button type="button" class="btn btn-primary mt-2" data-bs-toggle="modal" data-bs-target="#exampleModal">
        New Project
      </button>
      
      <!-- new project Modal -->
      <form #newform="ngForm" novalidate="novalidate">
      <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">New Project</h5>
              <button type="button" class="btn-close Close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              
              <div class="form-group row mb-2">
                <label for="txtNewProjectID" class="col-sm-4 col-form-label">Project ID</label>
                <div class="col-sm-8">
                  <input type="text" id="txtNewProjectID" style="width:100px" class="form-control" placeholder="Project ID" required="required" maxlength="3" pattern="[0-9]*$" #newprojectprojectid="ngModel" [ngClass]="{'is-invalid': newprojectprojectid.invalid && (newprojectprojectid.touched || newprojectprojectid.dirty || newform.submitted), 'is-valid':newprojectprojectid.valid && (newprojectprojectid.touched || newprojectprojectid.dirty || newform.submitted)}"
                    name="ProjectID" [(ngModel)]="newProject.projectID">
                </div>
                <span class="text-danger" *ngIf="(newprojectprojectid.invalid && (newprojectprojectid.dirty || newprojectprojectid.touched || newform.submitted) && newprojectprojectid.errors!['required'])">Project ID required</span>
                <span class="text-danger" *ngIf="(newprojectprojectid.invalid && (newprojectprojectid.dirty || newprojectprojectid.touched || newform.submitted) && newprojectprojectid.errors!['pattern'])">Project ID should contain number only</span>
                
              </div>
              
              <div class="form-group row mb-2">
                <label for="txtNewProjectName" class="col-sm-4 col-form-label">Project Name</label>
                <div class="col-sm-8">
                  <input type="text" id="txtNewProjectName" class="form-control" placeholder="Project Name" maxlength="10" pattern="[(a-z)(A-Z)(0-9)\ ]*$" required="required" #newprojectprojectname="ngModel"
                    name="ProjectName" [(ngModel)]="newProject.projectName">
                </div>
                <span class="text-danger" *ngIf="(newprojectprojectname.invalid && (newprojectprojectname.dirty || newprojectprojectname.touched || newform.submitted) && newprojectprojectname.errors!['required'])">Project ID required</span>
                <span class="text-danger" *ngIf="(newprojectprojectname.invalid && (newprojectprojectname.dirty || newprojectprojectname.touched || newform.submitted) && newprojectprojectname.errors!['pattern'])">special character not allowed</span>
                <span class="text-danger" *ngIf="(newprojectprojectname.invalid && (newprojectprojectname.dirty || newprojectprojectname.touched || newform.submitted) && newprojectprojectname.errors!['maxlength'])">max length 10</span>
              </div>
    
              <div class="form-group row mb-2">
                <label for="txtNewDateOfStart" class="col-sm-4 col-form-label">Date of Start</label>
                <div class="col-sm-8">
                  <input type="date" id="txtNewDateOfStart" style="width:150px" class="form-control"
                    placeholder="Date of Start" name="DateOfStart" [(ngModel)]="newProject.dateOfStart">
                </div>
              </div>
    
              <div class="form-group row mb-2">
                <label for="txtTeamSize" class="col-sm-4 col-form-label">Team Size</label>
                <div class="col-sm-8">
                  <input type="number" id="txtTeamSize" style="width:150px" class="form-control" placeholder="Team Size"
                    name="TeamSize" [(ngModel)]="newProject.teamSize">
                </div>
              </div>
            
            </div>
            <div class="modal-footer">
              <button class="btn btn-warning " (click)="onNewClick()">New</button>
              <button class="btn btn-warning Close" data-bs-dismiss="modal" aria-label="Close">Cancel</button>
              <button class="btn btn-success Close" data-bs-dismiss="modal" (click)="onSaveClick()" [disabled]="newform.invalid">Save</button>
            </div>
          
          </div>
        </div>
      </div>
    </form>
 <!-- update project Modal -->
      <div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Edit Project</h5>
              <button type="button" class="btn-close Close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
    
              <div class="form-group row mb-2">
                <label for="txtNewProjectID" class="col-sm-4 col-form-label">Project ID</label>
                <div class="col-sm-8">
                  <input type="number" id="txtNewProjectID" style="width:100px" class="form-control" placeholder="Project ID"
                    name="ProjectID" [(ngModel)]="editProject.projectID">
                </div>
              </div>
    
              <div class="form-group row mb-2">
                <label for="txtNewProjectName" class="col-sm-4 col-form-label">Project Name</label>
                <div class="col-sm-8">
                  <input type="text" id="txtNewProjectName" class="form-control" placeholder="Project Name"
                    name="ProjectName" [(ngModel)]="editProject.projectName">
                </div>
              </div>
    
              <div class="form-group row mb-2">
                <label for="txtNewDateOfStart" class="col-sm-4 col-form-label">Date of Start</label>
                <div class="col-sm-8">
                  <input type="date" id="txtNewDateOfStart" style="width:150px" class="form-control"
                    placeholder="Date of Start" name="DateOfStart" [(ngModel)]="editProject.dateOfStart">
                </div>
              </div>
    
              <div class="form-group row mb-2">
                <label for="txtTeamSize" class="col-sm-4 col-form-label">Team Size</label>
                <div class="col-sm-8">
                  <input type="number" id="txtTeamSize" style="width:150px" class="form-control" placeholder="Team Size"
                    name="TeamSize" [(ngModel)]="editProject.teamSize">
                </div>
              </div>
    
            </div>
            <div class="modal-footer">
              <button class="btn btn-warning Close" data-bs-dismiss="modal" aria-label="Close">Cancel</button>
              <button class="btn btn-success Close" data-bs-dismiss="modal" (click)="onUpdateClick()">Update</button>
            </div>
          </div>
        </div>
      </div>

      <!-- delete project Modal -->
      <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLabel">Delete Project</h5>
              <button type="button" class="btn-close Close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
    
              <div class="form-group row mb-2">
                <label for="txtNewProjectID" class="col-sm-4 col-form-label">Project ID</label>
                <div class="col-sm-8">
                  <input type="number" id="txtNewProjectID" style="width:100px" class="form-control" placeholder="Project ID"
                    name="ProjectID" [(ngModel)]="deleteProject.projectID">
                </div>
              </div>
    
              <div class="form-group row mb-2">
                <label for="txtNewProjectName" class="col-sm-4 col-form-label">Project Name</label>
                <div class="col-sm-8">
                  <input type="text" id="txtNewProjectName" class="form-control" placeholder="Project Name"
                    name="ProjectName" [(ngModel)]="deleteProject.projectName">
                </div>
              </div>
    
              <div class="form-group row mb-2">
                <label for="txtNewDateOfStart" class="col-sm-4 col-form-label">Date of Start</label>
                <div class="col-sm-8">
                  <input type="date" id="txtNewDateOfStart" style="width:150px" class="form-control"
                    placeholder="Date of Start" name="DateOfStart" [(ngModel)]="deleteProject.dateOfStart">
                </div>
              </div>
    
              <div class="form-group row mb-2">
                <label for="txtTeamSize" class="col-sm-4 col-form-label">Team Size</label>
                <div class="col-sm-8">
                  <input type="number" id="txtTeamSize" style="width:150px" class="form-control" placeholder="Team Size"
                    name="TeamSize" [(ngModel)]="deleteProject.teamSize">
                </div>
              </div>
    
            </div>
            <div class="modal-footer">
              <button class="btn btn-warning Close" data-bs-dismiss="modal" aria-label="Close">Cancel</button>
              <button class="btn btn-danger Close" data-bs-dismiss="modal" (click)="onConfirmDelete()">Delete</button>
            </div>
          </div>
        </div>
      </div>

        <table class="table mt-2">
            <thead class="table-dark">
                <tr>
                    <th>Project ID</th>
                    <th>Project Name</th>
                    <th>Date of Start</th>
                    <th>Team Size</th>
                    <th>Action</th>
                    <th>New component</th>
                </tr>
            </thead>
            <tbody>
            <tr *ngFor="let project of projects; let i=index">
                <td>{{project.projectID}}</td>
                <td>{{project.projectName}}</td>
                <td>{{project.dateOfStart}}</td>
                <td>{{project.teamSize}}</td>
                <td>
                  <button
                    class="btn btn-info"
                    (click)="onEditClick($event, i)"
                    data-bs-toggle="modal"
                    data-bs-target="#editModal"
                  >
                    Edit
                  </button>
                  <button
                    class="btn btn-danger ms-2"
                    (click)="onDeleteClick($event, i)"
                    data-bs-toggle="modal"
                    data-bs-target="#deleteModal"
                  >
                    Delete
                  </button>
                  <a class="btn btn-primary" [routerLink]="['/projectdetails',project.projectID]">View more</a>
                </td>
                <td><app-project [currentProject]="project">new project [currentindex]="i" (editclick)="onEditClick($event,i)"</app-project></td>
            </tr>
            </tbody>
        </table>
        
       
    </div>
</div>

<!-- Button trigger modal -->
